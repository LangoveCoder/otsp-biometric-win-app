<Page x:Class="BiometricSuperAdmin.Views.DashboardView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Dashboard"
      Background="#FAFAFA">

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Page Title -->
        <TextBlock Grid.Row="0"
                   Text="Dashboard"
                   Style="{StaticResource PageTitle}"/>

        <!-- Welcome Card -->
        <Border Grid.Row="1" 
                Style="{StaticResource StatsCard}"
                Background="#673AB7"
                Margin="0,0,0,16">
            <StackPanel>
                <TextBlock Text="Welcome to BACT | OTSP - Biometric Verification System"
                         FontSize="20"
                         FontWeight="Medium"
                         Foreground="White"
                         Margin="0,0,0,8"/>
                <TextBlock Text="Manage student registrations, colleges, tests, and generate verification packages"
                         FontSize="14"
                         Foreground="White"
                         Opacity="0.9"
                         TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <!-- Statistics Cards -->
        <UniformGrid Grid.Row="2" 
                    Rows="1" 
                    Columns="4"
                    Margin="0,0,0,16">

            <!-- Total Students Card -->
            <Border Style="{StaticResource StatsCard}">
                <StackPanel>
                    <TextBlock Text="ðŸ‘¥" Style="{StaticResource LargeIcon}" Foreground="#673AB7"/>
                    <TextBlock x:Name="TotalStudentsText"
                             Text="0"
                             Style="{StaticResource StatNumber}"
                             Foreground="#673AB7"/>
                    <TextBlock Text="Total Students"
                             Style="{StaticResource StatLabel}"/>
                </StackPanel>
            </Border>

            <!-- Verified Students Card -->
            <Border Style="{StaticResource StatsCard}">
                <StackPanel>
                    <TextBlock Text="âœ“" Style="{StaticResource LargeIcon}" Foreground="#4CAF50"/>
                    <TextBlock x:Name="VerifiedStudentsText"
                             Text="0"
                             Style="{StaticResource StatNumber}"
                             Foreground="#4CAF50"/>
                    <TextBlock Text="Verified Students"
                             Style="{StaticResource StatLabel}"/>
                </StackPanel>
            </Border>

            <!-- Active Colleges Card -->
            <Border Style="{StaticResource StatsCard}">
                <StackPanel>
                    <TextBlock Text="ðŸ«" Style="{StaticResource LargeIcon}" Foreground="#FF9800"/>
                    <TextBlock x:Name="ActiveCollegesText"
                             Text="0"
                             Style="{StaticResource StatNumber}"
                             Foreground="#FF9800"/>
                    <TextBlock Text="Active Colleges"
                             Style="{StaticResource StatLabel}"/>
                </StackPanel>
            </Border>

            <!-- Active Tests Card -->
            <Border Style="{StaticResource StatsCard}">
                <StackPanel>
                    <TextBlock Text="ðŸ“" Style="{StaticResource LargeIcon}" Foreground="#9C27B0"/>
                    <TextBlock x:Name="ActiveTestsText"
                             Text="0"
                             Style="{StaticResource StatNumber}"
                             Foreground="#9C27B0"/>
                    <TextBlock Text="Active Tests"
                             Style="{StaticResource StatLabel}"/>
                </StackPanel>
            </Border>
        </UniformGrid>

        <!-- Recent Activity and Quick Actions -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Recent Activity Card -->
            <Border Grid.Column="0" 
                    Style="{StaticResource StatsCard}"
                    Margin="0,0,8,0">
                <StackPanel>
                    <TextBlock Text="Recent Activity"
                             Style="{StaticResource SectionHeader}"/>

                    <DataGrid x:Name="RecentActivityGrid"
                            Style="{StaticResource CustomDataGrid}"
                            MaxHeight="300">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Date and Time" 
                                              Binding="{Binding DateTime}"
                                              Width="Auto"/>
                            <DataGridTextColumn Header="Activity" 
                                              Binding="{Binding Activity}"
                                              Width="*"/>
                            <DataGridTextColumn Header="User" 
                                              Binding="{Binding User}"
                                              Width="Auto"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <TextBlock x:Name="NoActivityText"
                             Text="No recent activity"
                             HorizontalAlignment="Center"
                             Margin="0,32"
                             Foreground="#999999"
                             Visibility="Collapsed"/>
                </StackPanel>
            </Border>

            <!-- Quick Actions Card -->
            <Border Grid.Column="1" 
                    Style="{StaticResource StatsCard}"
                    Margin="8,0,0,0">

                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Quick Actions"
                                 Style="{StaticResource SectionHeader}"/>

                        <Button x:Name="RegisterStudentButton"
                              Style="{StaticResource PrimaryButton}"
                              Click="RegisterStudentButton_Click"
                              Margin="0,8"
                              Content="âž• Register Student"/>

                        <Button x:Name="ViewStudentsButton"
                              Style="{StaticResource SecondaryButton}"
                              Click="ViewStudentsButton_Click"
                              Margin="0,8"
                              Content="ðŸ‘¥ View Students List"/>

                        <Button x:Name="AddCollegeButton"
                              Style="{StaticResource SecondaryButton}"
                              Click="AddCollegeButton_Click"
                              Margin="0,8"
                              Content="ðŸ« Add College"/>

                        <Button x:Name="CreateTestButton"
                              Style="{StaticResource SecondaryButton}"
                              Click="CreateTestButton_Click"
                              Margin="0,8"
                              Content="âž• Create Test"/>

                        <Button x:Name="GeneratePackageButton"
                              Style="{StaticResource PrimaryButton}"
                              Click="GeneratePackageButton_Click"
                              Margin="0,8"
                              Content="ðŸ“¦ Generate Package"/>

                        <Separator Margin="0,16" Background="#E0E0E0"/>

                        <Button x:Name="ViewReportsButton"
                              Style="{StaticResource SecondaryButton}"
                              Click="ViewReportsButton_Click"
                              Margin="0,8"
                              Content="ðŸ“Š View Reports"/>

                        <Button x:Name="RefreshButton"
                              Style="{StaticResource SecondaryButton}"
                              Click="RefreshButton_Click"
                              Margin="0,8"
                              Content="ðŸ”„ Refresh Dashboard"/>

                        <Button x:Name="ImportStudentsButton"
                              Style="{StaticResource PrimaryButton}"
                              Click="ImportStudentsButton_Click"
                              Margin="0,8"
                              Content="ðŸ“¥ Import Students"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- Loading Overlay -->
        <Grid x:Name="LoadingOverlay"
              Grid.Row="0"
              Grid.RowSpan="4"
              Background="#80000000"
              Visibility="Collapsed">
            <Border HorizontalAlignment="Center" 
                    VerticalAlignment="Center"
                    Background="White"
                    Padding="40"
                    CornerRadius="8">
                <StackPanel>
                    <TextBlock Text="â³" FontSize="48" HorizontalAlignment="Center"/>
                    <TextBlock Text="Loading..."
                             FontSize="16"
                             Margin="0,16,0,0"
                             HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Page>

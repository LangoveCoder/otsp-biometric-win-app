<Page x:Class="BiometricSuperAdmin.Views.RegistrationView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Student Registration"
      Background="#FAFAFA">

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Page Title -->
        <TextBlock Grid.Row="0"
                   Text="Student Registration"
                   Style="{StaticResource PageTitle}"/>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.5*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Registration Form -->
            <Border Grid.Column="0" 
                    Style="{StaticResource StatsCard}"
                    Margin="0,0,12,0">
                <StackPanel>
                    <TextBlock Text="Register New Student"
                             Style="{StaticResource SectionHeader}"/>

                    <!-- College Selection -->
                    <TextBlock Text="College" FontWeight="Medium" Margin="0,16,0,4"/>
                    <ComboBox x:Name="CollegeComboBox"
                            Style="{StaticResource CustomComboBox}"
                            DisplayMemberPath="Name"
                            SelectionChanged="CollegeComboBox_SelectionChanged"/>

                    <!-- Test Selection -->
                    <TextBlock Text="Test" FontWeight="Medium" Margin="0,16,0,4"/>
                    <ComboBox x:Name="TestComboBox"
                            Style="{StaticResource CustomComboBox}"
                            DisplayMemberPath="Name"
                            SelectionChanged="TestComboBox_SelectionChanged"/>

                    <!-- Roll Number -->
                    <TextBlock Text="Roll Number" FontWeight="Medium" Margin="0,16,0,4"/>
                    <TextBox x:Name="RollNumberTextBox"
                           Style="{StaticResource CustomTextField}"/>

                    <!-- Scanner Status -->
                    <Border Background="#F5F5F5"
                          Padding="16"
                          Margin="0,24,0,0"
                          CornerRadius="4"
                          BorderBrush="#E0E0E0"
                          BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="Scanner Status"
                                     FontWeight="Medium"
                                     Margin="0,0,0,8"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="ScannerStatusIcon"
                                         Text="ðŸ”Œ"
                                         FontSize="20"
                                         VerticalAlignment="Center"
                                         Margin="0,0,8,0"/>
                                <TextBlock x:Name="ScannerStatusText"
                                         Text="Not Initialized"
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Fingerprint Preview -->
                    <Border BorderBrush="#673AB7"
                          BorderThickness="2"
                          Padding="16"
                          Margin="0,24,0,0"
                          CornerRadius="4"
                          MinHeight="200"
                          Background="White">
                        <Grid>
                            <StackPanel x:Name="FingerprintPlaceholder"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center">
                                <TextBlock Text="ðŸ‘†"
                                         FontSize="64"
                                         HorizontalAlignment="Center"
                                         Foreground="#CCCCCC"/>
                                <TextBlock Text="Place finger on scanner"
                                         HorizontalAlignment="Center"
                                         Margin="0,8,0,0"
                                         Foreground="#999999"/>
                            </StackPanel>

                            <Image x:Name="FingerprintImage"
                                 Visibility="Collapsed"
                                 Stretch="Uniform"/>
                        </Grid>
                    </Border>

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Right"
                              Margin="0,24,0,0">
                        <Button x:Name="InitializeScannerButton"
                              Style="{StaticResource SecondaryButton}"
                              Click="InitializeScannerButton_Click"
                              Content="âš¡ Initialize Scanner"/>

                        <Button x:Name="CaptureFingerprintButton"
                              Style="{StaticResource PrimaryButton}"
                              Click="CaptureFingerprintButton_Click"
                              IsEnabled="False"
                              Content="ðŸ‘† Capture Fingerprint"/>

                        <Button x:Name="RegisterButton"
                              Style="{StaticResource PrimaryButton}"
                              Click="RegisterButton_Click"
                              IsEnabled="False"
                              Content="ðŸ’¾ Register Student"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Registered Students List -->
            <Border Grid.Column="1"
                    Style="{StaticResource StatsCard}"
                    Margin="12,0,0,0">
                <StackPanel>
                    <TextBlock Text="Registered Students"
                             Style="{StaticResource SectionHeader}"/>

                    <TextBlock x:Name="RegistrationCountText"
                             Text="0 students registered"
                             Margin="0,0,0,8"
                             Foreground="#999999"/>

                    <DataGrid x:Name="RegisteredStudentsGrid"
                            Style="{StaticResource CustomDataGrid}"
                            MaxHeight="400">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Roll Number"
                                              Binding="{Binding RollNumber}"
                                              Width="*"/>
                            <DataGridTextColumn Header="Date"
                                              Binding="{Binding RegistrationDate, StringFormat=dd-MMM}"
                                              Width="Auto"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <Button x:Name="RefreshListButton"
                          Style="{StaticResource SecondaryButton}"
                          Click="RefreshListButton_Click"
                          Margin="0,16,0,0"
                          Content="ðŸ”„ Refresh List"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Loading Overlay -->
        <Grid x:Name="LoadingOverlay"
              Grid.Row="0"
              Grid.RowSpan="2"
              Background="#80000000"
              Visibility="Collapsed">
            <Border HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Background="White"
                    Padding="40"
                    CornerRadius="8">
                <StackPanel>
                    <TextBlock Text="â³" FontSize="48" HorizontalAlignment="Center"/>
                    <TextBlock Text="Processing..."
                             FontSize="16"
                             Margin="0,16,0,0"
                             HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Page>
